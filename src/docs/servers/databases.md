---
title : "دیتابیس‌ها در سرور"
---

# دیتابیس‌ها 

### جدول محتوا

## بررسی اجمالی
<div id="25951379959"><script type="text/JavaScript" src="https://www.aparat.com/embed/NGtIq?data[rnddiv]=25951379959&data[responsive]=yes"></script></div>

زمانی که شما یک سرور جدید را از طریق پچیم راه اندازی می‌کنید، چه سرورتان از نوع [اپلیکیشن سرور](/servers/types#سرور-اپلیکیشن) باشد و چه از نوع [دیتابیس سرور](/servers/types#سرور-دیتابیس)، بخشی در پنل کاربری پچیم در سرور شما برای مدیریت کردن دیتابیس‌ها فعال خواهد شد که با آن بخش می‌توانید دیتابیس‌های سرور خود را مدیریت کنید.

## ایجاد سرورها با دیتابیس 

زمانی که شما تصمیم می‌گیرید که سرور اپلیکیشن یا سرور دیتابیس راه اندازی کنید در این راه اندازی می‌توانید یک دیتابیس برای نصب بر روی سرور انتخاب کنید. در حال حاضر پچیم نصب دیتابیس‌های زیر را پشتیبانی می‌کند : 

- Mysql (8.0)
- MariaDB (10.6)
- PostgreSQL (12)
- PostgreSQL (13)
- PostgreSQL (14)
- MongoDB (6)

به عنوان بخشی از پروسه راه‌اندازی سرور، پچیم دیتابیس انتخاب شده شما را با نامی که مشخص می‌کنید و کاربری با عنوان `pachim` و یک پسورد تصادفی در سرورتان نصب و راه اندازی می‌کند. این پسورد در صفحه راه اندازی سرور تا زمان راه اندازی به شما نمایش داده می‌شود و بعد از کامل شدن راه اندازی برای شما ایمیل هم خواهد شد اما دقت کنید که هیچ وقت در پنل پچیم این پسورد در دسترس نخواهد بود.

### نصب دیتابیس بعد از راه‌اندازی سرور 

پچیم قابلیت چند دیتابیس در یک سرور را پشتیبانی می‌کند بعد از اینکه وارد صفحه دیتابیس‌ها در سرور شوید خواهید دید که چه دیتابیس‌های روی سرور شما وجود دارند و اگر در زمان راه اندازی سرور دیتابیسی را انتخاب نکردید می‌توانید در این صفحه وارد دیتابیس مورد نظر خود شوید و آن را به سرورتان اضافه کنید. 

بعد از اضافه کردن دیتابیس به سرور می‌توانید آن دیتابیس را از طریق پنل پچیم مدیریت کنید. 

:::note{.warning}

::title[استفاده بهینه از دیتابیس‌ها]

ما در پچیم چند دیتابیس بر روی یک سرور را پیشنهاد نمی‌کنیم، چون ممکن است بر روی عملکرد سرور شما تاثیر منفی زیادی رو بگذارد و اگر منابع سرور شما کم باشد، سرور شما را دچار مشکلات اساسی مختلفی خواهد کرد. بنابراین با دقت انتخاب کنید که چه دیتابیس‌های بر روی سرور شما فعال باشند.

:::

:::note{.danger}

::title[سرور وب]

توجه داشته باشید که سرور وب نمی‌تواند دیتابیس داشته باشد و استثنائی برای این موضوع هم وجود ندارد، بنابراین اگر خواهان داشتن اپلیکیشن و دیتابیس در کنار هم هستند حتما `سرور اپلیکیشن` را انتخاب کنید.

:::
## تغییر پسورد اصلی دیتابیس

شما در صفحه اختصاصی هر کدام از دیتابیس‌ها می‌توانید بخشی با عنوان تغییر پسورد اصلی دیتابیس را مشاهده کنید که با استفاده از آن پسورد کاربر `pachim` و `root` با هم تغییر خواهد کرد.

:::note{.danger}

::title[تغییر دستی پسورد root]

توجه داشته باشید هر گونه تغییر پسورد به شکل دستی از طریق ssh توسط شما قابل پذیرش نیست و اگر چنین کاری انجام شود، ارتباط پچیم با سرور شما را دچار مشکل خواهد کرد و پچیم هیچ گونه مسئولیتی را در مقابل انجام چنین کاری بر عهده نخواهد گرفت.

::: 

## اتصال به دیتابیس از طریق خارج از سرور

شما می‌توانید از طریق خارج از سرور خود و با استفاده از نرم افزارهای مختلف به دیتابیس خود در سرور متصل شوید و اگر نیاز به مشاهده و تغییر دیتابیس یا حتی تهیه پشتیبانی از دیتابیس را داشته باشید اینکار را انجام دهید.

یکی از نرم افزارهای قدرتمند و پیشنهادی برای انجام اینکار [TablePlus](https://tableplus.com/) است که با توجه به تست‌های که ما انجام داده‌ایم بسیار کاربردی است و ما در پچیم آن را به شما پیشنهاد می‌کنیم. 

![نرم افزار tableplus](/img/tableplus.png)

در تصور بالا اطلاعات مهمی وجود دارد که درست وارد کردن آن می‌تواند به اتصال درست شما به دیتابیس سرورتان کمک زیادی کند.

- **Name** : این یک نام شخصی سازی شده است و هر چه که مایل باشید می‌توانید وارد کنید.
- **Host** : این مقدار باید معادل `127.0.0.1` باشد و مقدار دیگری قرار ندهید.
- **User** : این نام کاربری دیتابیس شماست که می‌تواند نام کاربری پیشفرض یعنی pachim باشد یا نام کاربر دیگری که از طریق پنل پچیم آن را به سرور اضافه کرده‌اید.
- **Password** : پسوردی که برای نام کاربری مورد نظر وجود دارد را در قسمت password وارد کنید.
- **Over SSH** : اتصال به دیتابیس تنها از طریق SSH انجام می‌شود، بنابراین تیک این گزینه را فعال کنید.
- **Server** : آی پی سرور خود را در این قسمت قرار دهید
- **Port** : پورت SSH در این قسمت به شکل پیش فرض 22 است اگر پورت دیگری دارید در این قسمت اعمال کنید.
- **Use SSH Key** : برای احرازهویت با کلید SSH تیک این گزینه را فعال کنید 
- **SSH private Key** : روی این گزینه کلیک کنید و کلید private مربوط به SSH سیستم خود را انتخاب کنید، دقت کنید کلید خصوصی و نه کلید عمومی. در مورد این موضوع در قسمت پایین توضیحاتی وجود دارد که حتما مطالعه کنید.

:::note{.warning}

توجه کنید در پروسه اتصال با TablePlus در قسمت انتخاب کلید SSH باید حتما کلید private مربوط به SSH را انتخاب کنید.

:::

برای آنکه اطمینان حاصل کنید اطلاعات را به درستی وارد کرده‌اید بهتر است یکبار اطلاعات را با توضیحات بالا چک کنید و در نهایت ابتدا بر روی گزینه test کلید کنید تا از صحت ارتباط اطمینان حاصل کنید و بعد از دریافت پیام موفقیت آمیز بر روی save (دخیره سازی) یا connect (ذخیره سازی و اتصال) کلیک کنید و خوب به شما تبریک می گوییم حالا از طریق سیستم خود می‌توانید به دیتابیس سرورتان متصل شوید و با آن کارهای مورد نظر خود را انجام دهید. 

اگر هنوز هیچ کلید SSH را برای اتصال مستقیم به سرور از طریق پچیم به سرورتان اضافه نکرده‌اید قبل از هر کاری باید اینکار را انجام دهید. پیشنهاد می‌کنیم برای انجام این کار صفحه [**کلیدهای SSH در سرور**](/servers/ssh) را مطالعه کنید. دقت کنید برای اتصال به دیتابیس روی سرور شما قطعا نیاز به کلید SSH دارید وگرنه انجام اینکار امکان پذیر نیست.



### استفاده از آدرس اتصال به دیتابیس 

آدرس اتصال یک لینک حاوی اطلاعات اتصال به دیتابیس شماست که با استفاده از آن می‌توانید به شکل راحت‌تری با TablePlus یا هر نرم افزار، که قابلیت دریافت لینک اتصال را دارد، اتصال به دیتابیس را انجام دهید.

زمانی که این لینک را در برنامه استفاده می‌کنید دقت کنید کماکان نیاز دارید کلید خصوصی SSH را از سیستم خود برای ارتباط انتخاب کنید و پسورد مربوط به کاربر دیتابیس را هم در جای مورد نظر اگر لازم بود وارد کنید.

:::note{.tip}
لینک اتصال تنها برای ارتباط برقرار کردن با دیتابیس و نام کاربری pachim به شما ارائه شده است و اگر قصد اتصال به نام کاربری و دیتابیس متفاوتی را دارید از طریق توضیحات بالا می‌توانید اینکار را انجام دهید.
:::


## مدیریت دیتابیس با پچیم

برای انجام کارهای مانند ایجاد دیتابیس جدید، ایجاد نام کاربری جدید، مشخص کردن دسترسی‌های هر کدام از کاربران مشخص شده به دیتابیس‌های مختلف و یا حتی حذف دیتابیس را شما می‌توانید از طریق پنل کاربری پچیم انجام دهید. بخشی از این اقدامات را در زیر به شما توضیح می‌دهیم.

در حال حاضر قابلیت مدیریت دیتابیس‌های از طریق پنل پچیم برای دیتابیس‌های زیر وجود دارد‌:

- Mysql
- MariaDB
- PostgreSQL
- MongoDB

### ایجاد کردن دیتابیس‌ها 

شما می‌توانید از طریق پنل کاربری پچیم وارد صفحه دیتابیس مورد نظر شوید و بر روی ایجاد دیتابیس کلیک کنید، با ارائه یک نام دیتابیس مورد نظر شما، اضافه خواهد شد، زمانی که دیتابیس ایجاد شود، دسترسی به دیتابیس به شکل اتوماتیک به کاربر `pachim` داده می‌شود. البته شما می‌توانید این دسترسی را از طریق همان پنل تغییر دهید و برای کاربران دیگر نیز فعال کنید. 

### همگام سازی دیتابیس‌ها 

برای ثبات، اگر قصد ایجاد یا حذف دیتابیسی را دارید بهتر است از طریق پنل کاربری پچیم اینکار را انجام دهید اما اگر شما خارج از پنل کاربری پچیم و مستقیما از طریق سرور اینکار را کنید می‌توانید از طریق **_دکمه همگام سازی لیست دیتابیس‌ها_** نام دیتابیس‌های سرور  را با پچیم همگام سازی کنید.

در همگام سازی بعضی از اسامی از قبل رزرو شده هستند و به عنوان نام دیتابیس نمی‌توانند قرار بگیرند از جمله این موارد :

- mysql
- information_schema
- peformance_schema
- sys
- postgres
- template0
- template1
- admin
- local
- config

### ایجاد کاربران دیتابیس

همچون ایجاد کردن دیتابیس از طریق پنل کاربری پچیم، شما می‌توانید کاربران مختلفی را به دیتابیس خود اضافه کنید تا بتوانند دیتابیس‌های شما را مدیریت کنند. شما با کلیک بر روی ایجاد کاربر با وارد کردن نام و یک پسورد می‌توانید کاربر خود را اضافه کنید و بعد از اضافه کردن آن کافیست دیتابیس‌های که قصد دارید آن کاربر به آن‌ها دسترسی داشته باشد را انتخاب کنید. 

دقت کنید تا زمانی که انتخاب نکنید که کاربر مورد نظر به چه دیتابیس‌های دسترسی داشته باشد به هیچ وجه نمی‌توان از کاربر مورد نظر برای اتصال به دیتابیس خاصی استفاده کرد. 

### آپگرید کردن دیتابیس‌ها 

در حال حاضر امکان ارتقاء ورژن دیتابیس‌های Mysql/MariaDB/Postgres/MongoDB امکان پذیر نیست. ممکن است در آینده چنین امکانی اضافه شود، اما در حال حاضر چنین قابلیتی وجود ندارد.

اگر مایل هستید دیتابیس مورد نظر خود را آپدیت کنید نیاز است اینکار را به شکل دستی انجام دهید.
